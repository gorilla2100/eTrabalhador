
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magnum SCD | Dashboard e-Trabalhador</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF1F5E;
            --primary-dark: #D10046;
            --primary-light: rgba(255, 31, 94, 0.1);
            --secondary: #9c27b0;
            --accent: #00bcd4;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #ff1744;
            --dark: #2c3e50;
            --gray: #6c757d;
            --light: #f8f9fa;
            --card-bg: rgba(60, 60, 60, 0.8);
            --sidebar-bg: rgba(45, 45, 45, 0.95);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #3a3a3a 0%, #2d2d2d 100%);
            background-attachment: fixed;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            position: relative;
            overflow-x: hidden;
        }

        /* Elementos decorativos */
        body::before {
            content: '';
            position: absolute;
            right: -100px;
            top: -100px;
            width: 800px;
            height: 800px;
            background: linear-gradient(135deg, var(--primary) 0%, #f50057 50%, #c51162 100%);
            opacity: 0.15;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            transform: rotate(15deg);
            z-index: 0;
        }

        body::after {
            content: '';
            position: absolute;
            right: 100px;
            bottom: -150px;
            width: 600px;
            height: 600px;
            background: linear-gradient(135deg, var(--primary) 0%, #f50057 100%);
            opacity: 0.1;
            clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%);
            transform: rotate(-20deg);
            z-index: 0;
        }

        /* Menu Lateral Modernizado */
        .sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px 20px;
            height: 100vh;
            overflow-y: auto;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 100;
            box-shadow: 2px 0 20px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 31, 94, 0.5);
            border-radius: 10px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 31, 94, 0.8);
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 31, 94, 0.3);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 800;
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 20px rgba(255, 31, 94, 0.4);
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            color: white;
        }

        .logo-subtitle {
            font-size: 0.9rem;
            color: #cccccc;
            font-weight: 300;
        }

        .sidebar-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-button {
            width: 100%;
            padding: 14px 20px;
            margin-bottom: 12px;
            background: rgba(60, 60, 60, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #dddddd;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .nav-button i {
            font-size: 1.1rem;
            width: 24px;
            text-align: center;
        }

        .nav-button:hover {
            background: rgba(255, 31, 94, 0.15);
            border-color: rgba(255, 31, 94, 0.5);
            color: #ffffff;
            transform: translateX(5px);
        }

        .nav-button.active {
            background: linear-gradient(135deg, rgba(255, 31, 94, 0.3) 0%, rgba(209, 0, 70, 0.2) 100%);
            border-color: var(--primary);
            color: #ffffff;
            box-shadow: 0 0 15px rgba(255, 31, 94, 0.3);
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        /* Conte√∫do Principal */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 40px;
            overflow-y: auto;
            position: relative;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ffffff, var(--primary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header .subtitle {
            font-size: 1.2rem;
            color: #cccccc;
            font-weight: 300;
        }

        /* Se√ß√µes de Conte√∫do */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Cards Modernos */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .dashboard-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #ffffff;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
        }

        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-pending {
            background-color: rgba(255, 152, 0, 0.2);
            color: #ff9800;
            border: 1px solid rgba(255, 152, 0, 0.3);
        }

        .status-in-progress {
            background-color: rgba(0, 188, 212, 0.2);
            color: #00bcd4;
            border: 1px solid rgba(0, 188, 212, 0.3);
        }

        .status-completed {
            background-color: rgba(76, 175, 80, 0.2);
            color: #4caf50;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .status-blocked {
            background-color: rgba(255, 23, 68, 0.2);
            color: #ff1744;
            border: 1px solid rgba(255, 23, 68, 0.3);
        }

        /* Tabelas */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .data-table th,
        .data-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: left;
            color: #dddddd;
        }

        .data-table th {
            background-color: rgba(255, 31, 94, 0.2);
            color: #ffffff;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table tbody tr:hover {
            background-color: rgba(255, 31, 94, 0.1);
        }

        /* Progress Bars */
        .progress-container {
            margin: 20px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #cccccc;
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        /* Filtros */
        .filter-container {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            background: rgba(60, 60, 60, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            color: #dddddd;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            background: rgba(255, 31, 94, 0.15);
            border-color: rgba(255, 31, 94, 0.5);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, rgba(255, 31, 94, 0.3) 0%, rgba(209, 0, 70, 0.2) 100%);
            border-color: var(--primary);
            color: #ffffff;
        }

        /* Se√ß√£o espec√≠fica de Temas */
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .theme-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            border-left: 5px solid var(--primary);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .theme-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(255, 31, 94, 0.3);
        }

        .theme-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .theme-card-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #ffffff;
        }

        .theme-card-responsible {
            font-size: 0.85rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .theme-card-progress {
            margin-top: 15px;
        }

        /* Responsividade */
        @media (max-width: 1100px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                padding: 20px;
            }

            .main-content {
                margin-left: 0;
                padding: 30px 20px;
            }

            .card-grid,
            .theme-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .filter-container {
                flex-direction: column;
            }
        }

        /* Anima√ß√µes */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dashboard-card,
        .theme-card {
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
        }

        .dashboard-card:nth-child(1) { animation-delay: 0.1s; }
        .dashboard-card:nth-child(2) { animation-delay: 0.2s; }
        .dashboard-card:nth-child(3) { animation-delay: 0.3s; }
        .dashboard-card:nth-child(4) { animation-delay: 0.4s; }
        .dashboard-card:nth-child(5) { animation-delay: 0.5s; }

        /* Bot√µes de A√ß√£o */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), #b0003a);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 31, 94, 0.4);
        }

        .btn-secondary {
            background: rgba(60, 60, 60, 0.8);
            color: #dddddd;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-secondary:hover {
            background: rgba(80, 80, 80, 0.8);
            border-color: rgba(255, 31, 94, 0.5);
        }

        /* Modal de Detalhes */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: #ffffff;
        }

        .close-modal {
            background: none;
            border: none;
            color: #cccccc;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: var(--primary);
        }

        /* Formul√°rios na Administra√ß√£o */
        .admin-form input,
        .admin-form select,
        .admin-form textarea {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            width: 100%;
            margin-bottom: 15px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .admin-form input:focus,
        .admin-form select:focus,
        .admin-form textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(255, 31, 94, 0.2);
        }

        .admin-form label {
            color: #cccccc;
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .theme-item-admin {
            padding: 15px;
            background: rgba(60, 60, 60, 0.5);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .theme-item-admin:hover {
            background: rgba(80, 80, 80, 0.5);
        }

        .danger-zone {
            padding: 15px;
            background: rgba(255, 23, 68, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--danger);
            margin-top: 30px;
        }

        /* Checkboxes estilizados */
        .task-checkbox-container {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: rgba(60, 60, 60, 0.5);
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .task-checkbox-container:hover {
            background: rgba(80, 80, 80, 0.5);
        }

        .task-checkbox-container.checked {
            background: rgba(76, 175, 80, 0.1);
            border-left: 3px solid var(--success);
        }

        .custom-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .custom-checkbox.checked {
            background: var(--primary);
        }

        .custom-checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Menu Lateral Modernizado -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <div class="logo-icon">M</div>
                <div class="logo-text">Magnum</div>
            </div>
            <div class="logo-subtitle">SCD - Dashboard e-Trabalhador</div>
        </div>

        <div class="sidebar-title">üìä Menu de Navega√ß√£o</div>
        <button class="nav-button active" data-section="overview">
            <i class="fas fa-chart-line"></i> Vis√£o Geral
        </button>
        <button class="nav-button" data-section="themes">
            <i class="fas fa-tasks"></i> Temas do Projeto
        </button>
        <button class="nav-button" data-section="progress">
            <i class="fas fa-chart-pie"></i> Progresso
        </button>
        <button class="nav-button" data-section="timeline">
            <i class="fas fa-calendar-alt"></i> Cronograma
        </button>
        <button class="nav-button" data-section="risks">
            <i class="fas fa-exclamation-triangle"></i> Riscos
        </button>
        <button class="nav-button" data-section="team">
            <i class="fas fa-users"></i> Equipe
        </button>
        <button class="nav-button" data-section="reports">
            <i class="fas fa-file-alt"></i> Relat√≥rios
        </button>
        <button class="nav-button" data-section="admin">
            <i class="fas fa-cog"></i> Administra√ß√£o
        </button>
    </div>

    <!-- Conte√∫do Principal -->
    <div class="main-content">
        <div class="container">
            <!-- Cabe√ßalho -->
            <div class="header">
                <h1>Dashboard e-Trabalhador</h1>
                <p class="subtitle">Controle completo do projeto Consignado e-Trabalhador - Atualizado em tempo real</p>
            </div>

            <!-- SE√á√ÉO: Vis√£o Geral -->
            <div id="overview" class="content-section active">
                <div class="card-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">Progresso Total</h3>
                            <div class="card-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                        </div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Andamento Geral</span>
                                <span id="totalProgress">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="totalProgressBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px;">
                            <div>
                                <div style="color: #cccccc; font-size: 0.9rem;">Temas Conclu√≠dos</div>
                                <div style="font-size: 2rem; font-weight: 700; color: var(--primary);" id="completedThemes">0</div>
                            </div>
                            <div>
                                <div style="color: #cccccc; font-size: 0.9rem;">Total de Temas</div>
                                <div style="font-size: 2rem; font-weight: 700; color: #ffffff;" id="totalThemes">0</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">Pr√≥ximas Entregas</h3>
                            <div class="card-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                        </div>
                        <div id="upcomingDeliveries" style="margin-top: 15px;">
                            <!-- Preenchido por JavaScript -->
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">Alertas Cr√≠ticos</h3>
                            <div class="card-icon">
                                <i class="fas fa-exclamation-circle"></i>
                            </div>
                        </div>
                        <div id="criticalAlerts" style="margin-top: 15px;">
                            <!-- Preenchido por JavaScript -->
                        </div>
                    </div>
                </div>

                <div style="margin-top: 40px;">
                    <h3 style="font-size: 1.5rem; color: #ffffff; margin-bottom: 20px;">Resumo por Respons√°vel</h3>
                    <div class="card-grid">
                        <!-- Preenchido por JavaScript -->
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO: Temas do Projeto -->
            <div id="themes" class="content-section">
                <div class="filter-container">
                    <button class="filter-btn active" data-filter="all">Todos</button>
                    <button class="filter-btn" data-filter="pending">Pendentes</button>
                    <button class="filter-btn" data-filter="in-progress">Em Andamento</button>
                    <button class="filter-btn" data-filter="completed">Conclu√≠dos</button>
                    <button class="filter-btn" data-filter="blocked">Bloqueados</button>
                </div>

                <div class="theme-grid" id="themesContainer">
                    <!-- Preenchido por JavaScript -->
                </div>
            </div>

            <!-- SE√á√ÉO: Progresso -->
            <div id="progress" class="content-section">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">Progresso por Tema</h3>
                        <div class="card-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                    </div>
                    <canvas id="progressChart" width="400" height="200" style="margin-top: 20px;"></canvas>
                </div>

                <div class="dashboard-card" style="margin-top: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">Linha do Tempo de Progresso</h3>
                        <div class="card-icon">
                            <i class="fas fa-history"></i>
                        </div>
                    </div>
                    <div id="progressTimeline" style="margin-top: 20px; padding: 20px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                        <!-- Preenchido por JavaScript -->
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO: Cronograma -->
            <div id="timeline" class="content-section">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">Cronograma do Projeto</h3>
                        <div class="card-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Fase</th>
                                <th>Data In√≠cio</th>
                                <th>Data T√©rmino</th>
                                <th>Status</th>
                                <th>Respons√°vel</th>
                            </tr>
                        </thead>
                        <tbody id="timelineTable">
                            <!-- Preenchido por JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- SE√á√ÉO: Riscos -->
            <div id="risks" class="content-section">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">Gest√£o de Riscos</h3>
                        <div class="card-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Risco</th>
                                <th>Probabilidade</th>
                                <th>Impacto</th>
                                <th>Status</th>
                                <th>Plano de A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="risksTable">
                            <!-- Preenchido por JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- SE√á√ÉO: Equipe -->
            <div id="team" class="content-section">
                <div class="card-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">Respons√°veis</h3>
                            <div class="card-icon">
                                <i class="fas fa-user-tie"></i>
                            </div>
                        </div>
                        <div id="teamMembers" style="margin-top: 15px;">
                            <!-- Preenchido por JavaScript -->
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">Comunica√ß√£o</h3>
                            <div class="card-icon">
                                <i class="fas fa-comments"></i>
                            </div>
                        </div>
                        <div style="margin-top: 15px;">
                            <div style="padding: 15px; background: rgba(0, 188, 212, 0.1); border-radius: 8px; margin-bottom: 15px;">
                                <div style="font-weight: 600; color: #ffffff;">Reuni√µes Di√°rias</div>
                                <div style="font-size: 0.9rem; color: #cccccc; margin-top: 5px;">Seg-Sex √†s 15:00 com Fun√ß√£o</div>
                            </div>
                            <div style="padding: 15px; background: rgba(156, 39, 176, 0.1); border-radius: 8px;">
                                <div style="font-weight: 600; color: #ffffff;">Checkpoint Semanal</div>
                                <div style="font-size: 0.9rem; color: #cccccc; margin-top: 5px;">Todas as quartas √†s 16:00</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO: Relat√≥rios -->
            <div id="reports" class="content-section">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">Relat√≥rios e Documentos</h3>
                        <div class="card-icon">
                            <i class="fas fa-folder-open"></i>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; margin-top: 20px;">
                        <div style="padding: 15px; background: rgba(60, 60, 60, 0.5); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <div style="font-weight: 600; color: #ffffff; margin-bottom: 8px;">
                                <i class="fas fa-file-pdf" style="color: var(--danger); margin-right: 8px;"></i>
                                Cronograma Detalhado
                            </div>
                            <div style="font-size: 0.85rem; color: #cccccc;">Atualizado: 05/12/2025</div>
                        </div>
                        <div style="padding: 15px; background: rgba(60, 60, 60, 0.5); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <div style="font-weight: 600; color: #ffffff; margin-bottom: 8px;">
                                <i class="fas fa-file-excel" style="color: var(--success); margin-right: 8px;"></i>
                                Planilha de Riscos
                            </div>
                            <div style="font-size: 0.85rem; color: #cccccc;">Atualizado: 04/12/2025</div>
                        </div>
                        <div style="padding: 15px; background: rgba(60, 60, 60, 0.5); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <div style="font-weight: 600; color: #ffffff; margin-bottom: 8px;">
                                <i class="fas fa-file-word" style="color: #2196f3; margin-right: 8px;"></i>
                                Relat√≥rio Semanal
                            </div>
                            <div style="font-size: 0.85rem; color: #cccccc;">Atualizado: 03/12/2025</div>
                        </div>
                        <div style="padding: 15px; background: rgba(60, 60, 60, 0.5); border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <div style="font-weight: 600; color: #ffffff; margin-bottom: 8px;">
                                <i class="fas fa-chart-line" style="color: var(--primary); margin-right: 8px;"></i>
                                Dashboard Executivo
                            </div>
                            <div style="font-size: 0.85rem; color: #cccccc;">Atualizado: 05/12/2025</div>
                        </div>
                    </div>

                    <div class="action-buttons" style="margin-top: 25px;">
                        <button class="btn btn-primary" id="generateReport">
                            <i class="fas fa-download"></i> Gerar Relat√≥rio
                        </button>
                        <button class="btn btn-secondary" id="exportData">
                            <i class="fas fa-file-export"></i> Exportar Dados
                        </button>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO: ADMINISTRA√á√ÉO -->
            <div id="admin" class="content-section">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">üìù Administra√ß√£o de Projetos</h3>
                        <div class="card-icon">
                            <i class="fas fa-edit"></i>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                        <!-- Coluna 1: Gerenciar Temas -->
                        <div>
                            <h4 style="color: #ffffff; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
                                <i class="fas fa-tasks"></i> Gerenciar Temas
                            </h4>

                            <div id="adminThemesList" style="margin-bottom: 20px;">
                                <!-- Lista de temas existentes -->
                            </div>

                            <button class="btn btn-primary" id="addNewTheme" style="width: 100%;">
                                <i class="fas fa-plus"></i> Adicionar Novo Tema
                            </button>

                            <div id="themeForm" style="display: none; margin-top: 20px; padding: 20px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <h5 style="color: #ffffff; margin-bottom: 15px;">Novo Tema</h5>

                                <div class="admin-form">
                                    <div>
                                        <label for="themeName">Nome do Tema *</label>
                                        <input type="text" id="themeName" placeholder="Ex: Credenciamentos">
                                    </div>

                                    <div>
                                        <label for="themeResponsible">Respons√°vel *</label>
                                        <input type="text" id="themeResponsible" placeholder="Ex: Ricardo Palmarin">
                                    </div>

                                    <div>
                                        <label for="themeProgress">Progresso Inicial (%)</label>
                                        <input type="range" id="themeProgress" min="0" max="100" value="0" style="width: 100%;">
                                        <span id="progressValueDisplay" style="color: var(--primary); font-weight: 600; margin-left: 10px;">0%</span>
                                    </div>

                                    <div>
                                        <label for="themeStatus">Status</label>
                                        <select id="themeStatus">
                                            <option value="pending">Pendente</option>
                                            <option value="in-progress">Em Andamento</option>
                                            <option value="completed">Conclu√≠do</option>
                                            <option value="blocked">Bloqueado</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label for="themeDeadline">Prazo</label>
                                        <input type="date" id="themeDeadline">
                                    </div>

                                    <div>
                                        <label for="themeTasks">Tarefas (uma por linha)</label>
                                        <textarea id="themeTasks" placeholder="Digite cada tarefa em uma linha" rows="5"></textarea>
                                    </div>

                                    <div class="action-buttons">
                                        <button class="btn btn-primary" id="saveTheme">
                                            <i class="fas fa-save"></i> Salvar Tema
                                        </button>
                                        <button class="btn btn-secondary" id="cancelTheme">
                                            <i class="fas fa-times"></i> Cancelar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Coluna 2: Importar/Exportar -->
                        <div>
                            <h4 style="color: #ffffff; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
                                <i class="fas fa-database"></i> Gerenciar Dados
                            </h4>

                            <div style="margin-bottom: 20px;">
                                <h5 style="color: #ffffff; margin-bottom: 10px;">Importar Dados</h5>
                                <div style="padding: 15px; background: rgba(0,0,0,0.2); border-radius: 8px; margin-bottom: 15px;">
                                    <p style="color: #cccccc; margin-bottom: 10px; font-size: 0.9rem;">
                                        Fa√ßa upload de um arquivo JSON com os dados do projeto
                                    </p>
                                    <input type="file" id="importFile" accept=".json" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.3); color: white;">
                                    <button class="btn btn-primary" id="importData" style="width: 100%; margin-top: 10px;">
                                        <i class="fas fa-upload"></i> Importar Dados
                                    </button>
                                </div>
                            </div>

                            <div>
                                <h5 style="color: #ffffff; margin-bottom: 10px;">Exportar Dados</h5>
                                <div style="padding: 15px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                    <p style="color: #cccccc; margin-bottom: 10px; font-size: 0.9rem;">
                                        Exporte todos os dados atuais para backup
                                    </p>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary" id="exportJSON">
                                            <i class="fas fa-download"></i> Exportar JSON
                                        </button>
                                        <button class="btn btn-secondary" id="exportCSV">
                                            <i class="fas fa-file-csv"></i> Exportar CSV
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="danger-zone">
                                <h5 style="color: #ffffff; margin-bottom: 10px;">
                                    <i class="fas fa-exclamation-triangle"></i> √Årea Perigosa
                                </h5>
                                <p style="color: #cccccc; margin-bottom: 15px; font-size: 0.9rem;">
                                    Cuidado! Estas a√ß√µes n√£o podem ser desfeitas.
                                </p>
                                <button class="btn" id="resetData" style="background: var(--danger); color: white; width: 100%;">
                                    <i class="fas fa-trash"></i> Limpar Todos os Dados
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Modal para Detalhes do Tema -->
    <div class="modal-overlay" id="themeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalThemeTitle">Detalhes do Tema</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div id="modalThemeContent">
                <!-- Conte√∫do preenchido por JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Dados do projeto
        let themesData = {
            "Credenciamentos": {
                responsible: "Ricardo Palmarin",
                tasks: [
                    "Contrato com o MTE",
                    "Contrato com a Dataprev (Servi√ßos de Consultas e Averba√ß√µes)",
                    "Contrato com a N√∫clea",
                    "Contrato com o Consumidor.Gov",
                    "Contrato com a Autorregula√ß√£o (Febraban o ABBC)",
                    "Contrato com a B3"
                ],
                progress: 45,
                status: "in-progress",
                deadline: "2025-12-20",
                tasksCompleted: [true, true, false, false, false, false] // Tarefas j√° conclu√≠das
            },
            "Sistemas": {
                responsible: "TI Magnum",
                tasks: [
                    "M√≥dulo e-Trabalhador do Fun√ß√£o + Motor Averba√ß√£o Dataprev",
                    "M√≥dulo SRCC do Fun√ß√£o",
                    "M√≥dulo MCB do Fun√ß√£o",
                    "M√≥dulo CTC do Fun√ß√£o",
                    "M√≥dulo Cess√£o do Fun√ß√£o",
                    "Conect Direct",
                    "Fornecedor Qualifica√ß√£o PJ",
                    "Fornecedor Qualifica√ß√£o PF",
                    "APP Magnum para o cliente atuar no leil√£o e no autoatendimento"
                ],
                progress: 30,
                status: "in-progress",
                deadline: "2026-01-15",
                tasksCompleted: [true, true, false, false, false, false, false, false, false]
            },
            "Conectividade": {
                responsible: "PO Magnum",
                tasks: [
                    "Agenda de alinhamento com a Fun√ß√£o para entender o processo de conectividade",
                    "Ambiente de Homologa√ß√£o: Magnum e Dataprev",
                    "Ambiente de Produ√ß√£o: Magnum e Dataprev"
                ],
                progress: 60,
                status: "in-progress",
                deadline: "2025-12-10",
                tasksCompleted: [true, true, false]
            },
            "Certifica√ß√µes": {
                responsible: "Rodrigo",
                tasks: [
                    "Agenda com a Fun√ß√£o para alinhamento dos certificados necess√°rios"
                ],
                progress: 10,
                status: "pending",
                deadline: "2025-12-05",
                tasksCompleted: [false]
            },
            "Desenho do Produto": {
                responsible: "Produtos",
                tasks: [
                    "Desenho do produto envolvendo todas as etapas do processo (Origina√ß√£o, BackOffice, Cont√°bil, Controles, BI, Cess√£o etc.)"
                ],
                progress: 80,
                status: "in-progress",
                deadline: "2025-12-15",
                tasksCompleted: [true]
            },
            "Pol√≠tica": {
                responsible: "Produtos",
                tasks: [
                    "Defini√ß√£o da Pol√≠tica; P√∫blico alvo, tipos de an√°lises de qualifica√ß√£o de PJ e PF e etc."
                ],
                progress: 75,
                status: "in-progress",
                deadline: "2025-12-12",
                tasksCompleted: [true]
            },
            "Estrat√©gia": {
                responsible: "Produtos e PO",
                tasks: [
                    "Canais de Prospec√ß√µes",
                    "App para o autoatendimento, inclusive formatado para a prospec√ß√£o via 'leil√£o'"
                ],
                progress: 40,
                status: "in-progress",
                deadline: "2026-01-10",
                tasksCompleted: [true, false]
            },
            "Fornecedores de Dados Externos": {
                responsible: "Produtos e PO",
                tasks: [
                    "Fornecedores para qualifica√ß√£o de PJ",
                    "Fornecedores para qualifica√ß√£o de PF",
                    "Fornecedores para bureaux de Cr√©dito e Antifraude"
                ],
                progress: 55,
                status: "in-progress",
                deadline: "2025-12-18",
                tasksCompleted: [true, true, false]
            },
            "Documenta√ß√£o": {
                responsible: "Produtos e PO",
                tasks: [
                    "CCB para o e-Trabalhador"
                ],
                progress: 90,
                status: "in-progress",
                deadline: "2025-12-08",
                tasksCompleted: [true]
            },
            "Parametriza√ß√µes": {
                responsible: "Produtos e BackOffice",
                tasks: [
                    "Criar o(s) Usu√°rio(s)",
                    "Criar o Produto",
                    "Cadastrar o Empregador",
                    "Criar o(s) Conv√™nio(s)",
                    "Criar a Esteira",
                    "Parametrizar as Pol√≠ticas"
                ],
                progress: 25,
                status: "pending",
                deadline: "2026-01-20",
                tasksCompleted: [false, false, false, false, false, false]
            },
            "Testes e Ambientes": {
                responsible: "Produtos e BackOffice",
                tasks: [
                    "Testar em ambiente de Homologa√ß√£o",
                    "Replicar em ambiente de Produ√ß√£o",
                    "Testar em ambiente de Produ√ß√£o"
                ],
                progress: 15,
                status: "pending",
                deadline: "2026-02-01",
                tasksCompleted: [false, false, false]
            }
        };

        // Timeline do projeto
        const timelineData = [
            { phase: "Inicia√ß√£o", start: "2025-10-01", end: "2025-10-15", status: "completed", responsible: "Gest√£o" },
            { phase: "Planejamento", start: "2025-10-16", end: "2025-11-15", status: "completed", responsible: "PO" },
            { phase: "Execu√ß√£o - Fase 1", start: "2025-11-16", end: "2025-12-20", status: "in-progress", responsible: "Equipe" },
            { phase: "Execu√ß√£o - Fase 2", start: "2026-01-05", end: "2026-02-15", status: "pending", responsible: "Equipe" },
            { phase: "Testes e Valida√ß√£o", start: "2026-02-16", end: "2026-03-15", status: "pending", responsible: "QA" },
            { phase: "Go-Live", start: "2026-03-20", end: "2026-03-31", status: "pending", responsible: "Todos" }
        ];

        // Riscos identificados
        const risksData = [
            { risk: "Atraso na assinatura de contratos", probability: "Alta", impact: "Alto", status: "Monitorado", action: "Reuni√µes di√°rias com jur√≠dico" },
            { risk: "Problemas na integra√ß√£o com Dataprev", probability: "M√©dia", impact: "Alto", status: "Mitigado", action: "Testes antecipados em homologa√ß√£o" },
            { risk: "Alta rotatividade da equipe", probability: "Baixa", impact: "M√©dio", status: "Aceito", action: "Plano de reten√ß√£o de talentos" },
            { risk: "Mudan√ßa na legisla√ß√£o", probability: "M√©dia", impact: "Alto", status: "Monitorado", action: "Acompanhamento legislativo semanal" },
            { risk: "Problemas com fornecedores de dados", probability: "Baixa", impact: "M√©dio", status: "Mitigado", action: "Contratos com multa por descumprimento" }
        ];

        // Sistema de armazenamento
        const STORAGE_KEY = 'magnum_etrabalhador_v5';

        // Elementos da interface
        const navButtons = document.querySelectorAll('.nav-button');
        const contentSections = document.querySelectorAll('.content-section');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const themesContainer = document.getElementById('themesContainer');
        const modal = document.getElementById('themeModal');
        const closeModalBtn = document.getElementById('closeModal');
        const modalTitle = document.getElementById('modalThemeTitle');
        const modalContent = document.getElementById('modalThemeContent');

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            loadFromStorage(); // Carregar dados salvos primeiro
            initNavigation();
            initFilters();
            initAdminSection();
            renderOverview();
            renderThemes();
            renderTimeline();
            renderRisks();
            renderTeam();
            setupEventListeners();

            // Inicializar gr√°fico
            if (typeof Chart !== 'undefined') {
                renderProgressChart();
            }
        });

        // Navega√ß√£o
        function initNavigation() {
            navButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');

                    navButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');

                    contentSections.forEach(section => section.classList.remove('active'));
                    document.getElementById(sectionId).classList.add('active');
                });
            });
        }

        // Filtros
        function initFilters() {
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');

                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');

                    filterThemes(filter);
                });
            });
        }

        // Filtragem de temas
        function filterThemes(filter) {
            const themeCards = document.querySelectorAll('.theme-card');

            themeCards.forEach(card => {
                const status = card.getAttribute('data-status');

                if (filter === 'all' || filter === status) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Renderizar vis√£o geral
        function renderOverview() {
            const totalThemes = Object.keys(themesData).length;
            let completedThemes = 0;
            let totalProgress = 0;

            Object.values(themesData).forEach(theme => {
                totalProgress += theme.progress;
                if (theme.progress === 100) completedThemes++;
            });

            const avgProgress = Math.round(totalProgress / totalThemes);

            document.getElementById('totalThemes').textContent = totalThemes;
            document.getElementById('completedThemes').textContent = completedThemes;
            document.getElementById('totalProgress').textContent = avgProgress + '%';
            document.getElementById('totalProgressBar').style.width = avgProgress + '%';

            // Pr√≥ximas entregas
            const upcomingContainer = document.getElementById('upcomingDeliveries');
            const today = new Date();
            const upcoming = [];

            Object.entries(themesData).forEach(([name, data]) => {
                const deadline = new Date(data.deadline);
                if (deadline > today) {
                    upcoming.push({ name, ...data });
                }
            });

            upcoming.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));

            upcomingContainer.innerHTML = '';
            upcoming.slice(0, 3).forEach(item => {
                const daysLeft = Math.ceil((new Date(item.deadline) - today) / (1000 * 60 * 60 * 24));

                const div = document.createElement('div');
                div.style.padding = '12px';
                div.style.background = 'rgba(60, 60, 60, 0.5)';
                div.style.borderRadius = '8px';
                div.style.marginBottom = '10px';
                div.style.borderLeft = '4px solid var(--primary)';

                div.innerHTML = `
                    <div style="font-weight: 600; color: #ffffff;">${item.name}</div>
                    <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                        <span style="font-size: 0.9rem; color: #cccccc;">${new Date(item.deadline).toLocaleDateString('pt-BR')}</span>
                        <span style="font-size: 0.9rem; color: ${daysLeft <= 7 ? 'var(--danger)' : daysLeft <= 14 ? 'var(--warning)' : '#4caf50'}">${daysLeft} dias</span>
                    </div>
                    <div class="progress-bar" style="margin-top: 8px; height: 6px;">
                        <div class="progress-fill" style="width: ${item.progress}%"></div>
                    </div>
                `;

                upcomingContainer.appendChild(div);
            });

            // Alertas cr√≠ticos
            const criticalAlerts = document.getElementById('criticalAlerts');
            criticalAlerts.innerHTML = '';

            Object.entries(themesData).forEach(([name, data]) => {
                if (data.progress < 20 && data.status !== 'completed') {
                    const deadline = new Date(data.deadline);
                    const daysLeft = Math.ceil((deadline - today) / (1000 * 60 * 60 * 24));

                    if (daysLeft <= 7) {
                        const alertDiv = document.createElement('div');
                        alertDiv.style.padding = '12px';
                        alertDiv.style.background = 'rgba(255, 23, 68, 0.1)';
                        alertDiv.style.borderRadius = '8px';
                        alertDiv.style.marginBottom = '10px';
                        alertDiv.style.borderLeft = '4px solid var(--danger)';

                        alertDiv.innerHTML = `
                            <div style="font-weight: 600; color: #ffffff;">${name}</div>
                            <div style="font-size: 0.9rem; color: #cccccc; margin-top: 5px;">
                                Progresso: ${data.progress}% | Prazo: ${daysLeft} dias
                            </div>
                        `;

                        criticalAlerts.appendChild(alertDiv);
                    }
                }
            });

            if (criticalAlerts.children.length === 0) {
                criticalAlerts.innerHTML = `
                    <div style="padding: 12px; background: rgba(76, 175, 80, 0.1); border-radius: 8px; border-left: 4px solid var(--success); text-align: center;">
                        <div style="font-weight: 600; color: #ffffff;">Sem alertas cr√≠ticos</div>
                        <div style="font-size: 0.9rem; color: #cccccc; margin-top: 5px;">Tudo sob controle!</div>
                    </div>
                `;
            }

            // Resumo por respons√°vel
            const responsibleSummary = {};

            Object.values(themesData).forEach(theme => {
                const resp = theme.responsible;
                if (!responsibleSummary[resp]) {
                    responsibleSummary[resp] = { count: 0, progress: 0 };
                }
                responsibleSummary[resp].count++;
                responsibleSummary[resp].progress += theme.progress;
            });

            const summaryGrid = document.querySelector('#overview .card-grid:nth-of-type(2)');
            if (summaryGrid) {
                summaryGrid.innerHTML = '';

                Object.entries(responsibleSummary).forEach(([resp, data]) => {
                    const avgProgress = Math.round(data.progress / data.count);

                    const card = document.createElement('div');
                    card.className = 'dashboard-card';
                    card.style.animationDelay = '0s';

                    card.innerHTML = `
                        <div class="card-header">
                            <h3 class="card-title" style="font-size: 1.2rem;">${resp}</h3>
                            <div class="card-icon" style="width: 40px; height: 40px; font-size: 1rem;">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                        <div style="margin-top: 15px;">
                            <div style="color: #cccccc; font-size: 0.9rem;">Temas: ${data.count}</div>
                            <div class="progress-container" style="margin: 15px 0;">
                                <div class="progress-label">
                                    <span>Progresso M√©dio</span>
                                    <span>${avgProgress}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${avgProgress}%"></div>
                                </div>
                            </div>
                        </div>
                    `;

                    summaryGrid.appendChild(card);
                });
            }
        }

        // Renderizar temas
        function renderThemes() {
            themesContainer.innerHTML = '';

            Object.entries(themesData).forEach(([name, data], index) => {
                const completedTasksCount = data.tasksCompleted ? data.tasksCompleted.filter(t => t).length : 0;
                const totalTasksCount = data.tasks.length;

                const themeCard = document.createElement('div');
                themeCard.className = 'theme-card';
                themeCard.setAttribute('data-status', data.status);
                themeCard.style.animationDelay = (index * 0.1) + 's';

                themeCard.innerHTML = `
                    <div class="theme-card-header">
                        <h4 class="theme-card-title">${name}</h4>
                        <span class="status-badge status-${data.status}">
                            ${getStatusText(data.status)}
                        </span>
                    </div>
                    <div class="theme-card-responsible">
                        <i class="fas fa-user"></i> ${data.responsible}
                    </div>
                    <div style="margin: 15px 0; font-size: 0.9rem; color: #cccccc;">
                        ${totalTasksCount} tarefas ${completedTasksCount > 0 ? `(${completedTasksCount} conclu√≠das)` : ''}
                    </div>
                    <div class="theme-card-progress">
                        <div class="progress-label">
                            <span>Progresso</span>
                            <span>${data.progress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${data.progress}%"></div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 15px; font-size: 0.85rem;">
                        <span style="color: #cccccc;">
                            <i class="far fa-calendar-alt"></i> ${new Date(data.deadline).toLocaleDateString('pt-BR')}
                        </span>
                        <button class="filter-btn" style="padding: 5px 10px; font-size: 0.8rem;" data-theme="${name}">
                            <i class="fas fa-eye"></i> Detalhes
                        </button>
                    </div>
                `;

                themesContainer.appendChild(themeCard);
            });

            // Adicionar eventos aos bot√µes de detalhes
            document.querySelectorAll('[data-theme]').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const themeName = this.getAttribute('data-theme');
                    openThemeModal(themeName);
                });
            });

            // Adicionar evento de clique nos cards
            document.querySelectorAll('.theme-card').forEach(card => {
                card.addEventListener('click', function() {
                    const themeName = this.querySelector('.theme-card-title').textContent;
                    openThemeModal(themeName);
                });
            });
        }

        // Abrir modal de tema (VERS√ÉO CORRIGIDA)
        function openThemeModal(themeName) {
            const theme = themesData[themeName];
            if (!theme) return;

            modalTitle.textContent = themeName;

            // Inicializar tasksCompleted se n√£o existir
            if (!theme.tasksCompleted) {
                theme.tasksCompleted = new Array(theme.tasks.length).fill(false);
            }

            let tasksHtml = '';
            theme.tasks.forEach((task, index) => {
                const isChecked = theme.tasksCompleted[index] === true;
                tasksHtml += `
                    <div class="task-checkbox-container ${isChecked ? 'checked' : ''}" data-index="${index}">
                        <div class="custom-checkbox ${isChecked ? 'checked' : ''}" data-index="${index}"></div>
                        <label style="flex: 1; color: #ffffff; cursor: pointer;">${task}</label>
                    </div>
                `;
            });

            modalContent.innerHTML = `
                <div style="margin-bottom: 25px;">
                    <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <div style="color: #cccccc; font-size: 0.9rem;">Respons√°vel</div>
                            <div style="font-weight: 600; color: #ffffff; font-size: 1.1rem;">${theme.responsible}</div>
                        </div>
                        <div>
                            <div style="color: #cccccc; font-size: 0.9rem;">Prazo</div>
                            <div style="font-weight: 600; color: #ffffff; font-size: 1.1rem;">${new Date(theme.deadline).toLocaleDateString('pt-BR')}</div>
                        </div>
                        <div>
                            <div style="color: #cccccc; font-size: 0.9rem;">Status</div>
                            <div><span class="status-badge status-${theme.status}">${getStatusText(theme.status)}</span></div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Progresso Atual</span>
                            <span>${theme.progress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${theme.progress}%"></div>
                        </div>
                    </div>
                </div>

                <h4 style="color: #ffffff; margin-bottom: 15px;">Tarefas (${theme.tasks.length})</h4>
                <div style="margin-bottom: 25px;" id="modalTasksList">
                    ${tasksHtml}
                </div>

                <div style="margin-bottom: 25px;">
                    <h4 style="color: #ffffff; margin-bottom: 10px;">Atualizar Progresso</h4>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <input type="range" id="progressSlider" min="0" max="100" value="${theme.progress}" style="flex: 1;">
                        <span id="progressValue" style="font-weight: 600; color: var(--primary); min-width: 50px;">${theme.progress}%</span>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9rem; color: #cccccc;">
                        <i class="fas fa-lightbulb"></i> Dica: Marque as tarefas acima ou ajuste manualmente o slider
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="saveThemeProgress">
                        <i class="fas fa-save"></i> Salvar Altera√ß√µes
                    </button>
                    <button class="btn btn-secondary" id="cancelChanges">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
            `;

            // Configurar eventos nas checkboxes personalizadas
            const taskContainers = modalContent.querySelectorAll('.task-checkbox-container');
            taskContainers.forEach(container => {
                container.addEventListener('click', function(e) {
                    const index = parseInt(this.getAttribute('data-index'));
                    const checkbox = this.querySelector('.custom-checkbox');

                    // Alternar estado
                    const isChecked = checkbox.classList.contains('checked');
                    checkbox.classList.toggle('checked');
                    this.classList.toggle('checked');

                    // Atualizar array de tarefas completas
                    theme.tasksCompleted[index] = !isChecked;

                    // Atualizar progresso baseado nas checkboxes
                    updateProgressFromCheckboxes(themeName);
                });
            });

            // Configurar eventos no slider
            const progressSlider = document.getElementById('progressSlider');
            const progressValue = document.getElementById('progressValue');

            if (progressSlider && progressValue) {
                progressSlider.addEventListener('input', function() {
                    progressValue.textContent = this.value + '%';
                    // Atualizar checkboxes baseado no slider
                    updateCheckboxesFromSlider(themeName, this.value);
                });
            }

            // Bot√£o Salvar
            const saveBtn = document.getElementById('saveThemeProgress');
            if (saveBtn) {
                saveBtn.addEventListener('click', function() {
                    saveThemeProgress(themeName);
                });
            }

            // Bot√£o Cancelar
            const cancelBtn = document.getElementById('cancelChanges');
            if (cancelBtn) {
                cancelBtn.addEventListener('click', function() {
                    modal.classList.remove('active');
                });
            }

            modal.classList.add('active');
        }

        // Fun√ß√£o para atualizar progresso baseado nas checkboxes
        function updateProgressFromCheckboxes(themeName) {
            const theme = themesData[themeName];
            if (!theme || !theme.tasksCompleted) return;

            const totalTasks = theme.tasks.length;
            const completedTasks = theme.tasksCompleted.filter(t => t).length;
            const newProgress = Math.round((completedTasks / totalTasks) * 100);

            // Atualizar slider e display
            const progressSlider = document.getElementById('progressSlider');
            const progressValue = document.getElementById('progressValue');

            if (progressSlider && progressValue) {
                progressSlider.value = newProgress;
                progressValue.textContent = newProgress + '%';
            }
        }

        // Fun√ß√£o para atualizar checkboxes baseado no slider
        function updateCheckboxesFromSlider(themeName, progressValue) {
            const theme = themesData[themeName];
            if (!theme) return;

            const progress = parseInt(progressValue);
            const totalTasks = theme.tasks.length;

            // Calcular quantas tarefas devem estar marcadas
            const tasksToComplete = Math.round((progress / 100) * totalTasks);

            // Atualizar array de tarefas completas
            if (!theme.tasksCompleted) {
                theme.tasksCompleted = new Array(totalTasks).fill(false);
            }

            for (let i = 0; i < totalTasks; i++) {
                theme.tasksCompleted[i] = i < tasksToComplete;
            }

            // Atualizar visualmente as checkboxes
            const taskContainers = modalContent.querySelectorAll('.task-checkbox-container');
            taskContainers.forEach((container, index) => {
                const checkbox = container.querySelector('.custom-checkbox');
                const isChecked = index < tasksToComplete;

                checkbox.classList.toggle('checked', isChecked);
                container.classList.toggle('checked', isChecked);
            });
        }

        // Salvar progresso do tema
        function saveThemeProgress(themeName) {
            const theme = themesData[themeName];
            if (!theme) return;

            // Obter progresso do slider
            const progressSlider = document.getElementById('progressSlider');
            const newProgress = parseInt(progressSlider.value);

            // Atualizar progresso
            theme.progress = newProgress;

            // Atualizar status baseado no progresso
            if (newProgress === 100) {
                theme.status = 'completed';
            } else if (newProgress > 0) {
                theme.status = 'in-progress';
            } else {
                theme.status = 'pending';
            }

            // Salvar no localStorage
            saveToStorage();

            // Fechar modal e atualizar interface
            modal.classList.remove('active');
            renderOverview();
            renderThemes();
            renderAdminThemesList();

            if (window.progressChartInstance) {
                renderProgressChart();
            }

            alert('Progresso atualizado com sucesso!');
        }

        // Renderizar timeline
        function renderTimeline() {
            const timelineTable = document.getElementById('timelineTable');
            timelineTable.innerHTML = '';

            timelineData.forEach(item => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${item.phase}</td>
                    <td>${new Date(item.start).toLocaleDateString('pt-BR')}</td>
                    <td>${new Date(item.end).toLocaleDateString('pt-BR')}</td>
                    <td><span class="status-badge status-${item.status}">${getStatusText(item.status)}</span></td>
                    <td>${item.responsible}</td>
                `;

                timelineTable.appendChild(row);
            });
        }

        // Renderizar riscos
        function renderRisks() {
            const risksTable = document.getElementById('risksTable');
            risksTable.innerHTML = '';

            risksData.forEach(risk => {
                const row = document.createElement('tr');

                // Determinar cor baseado na probabilidade/impacto
                let riskClass = '';
                if (risk.probability === 'Alta' && risk.impact === 'Alto') {
                    riskClass = 'status-blocked';
                } else if (risk.probability === 'Alta' || risk.impact === 'Alto') {
                    riskClass = 'status-pending';
                } else {
                    riskClass = 'status-in-progress';
                }

                row.innerHTML = `
                    <td>${risk.risk}</td>
                    <td><span class="status-badge ${riskClass}">${risk.probability}</span></td>
                    <td><span class="status-badge ${riskClass}">${risk.impact}</span></td>
                    <td>${risk.status}</td>
                    <td>${risk.action}</td>
                `;

                risksTable.appendChild(row);
            });
        }

        // Renderizar equipe
        function renderTeam() {
            const teamMembers = document.getElementById('teamMembers');
            teamMembers.innerHTML = '';

            const uniqueMembers = new Set();
            Object.values(themesData).forEach(theme => {
                uniqueMembers.add(theme.responsible);
            });

            Array.from(uniqueMembers).forEach(member => {
                // Contar temas por respons√°vel
                const themeCount = Object.values(themesData).filter(t => t.responsible === member).length;
                const completedCount = Object.values(themesData).filter(t => t.responsible === member && t.progress === 100).length;

                const memberDiv = document.createElement('div');
                memberDiv.style.padding = '15px';
                memberDiv.style.background = 'rgba(60, 60, 60, 0.5)';
                memberDiv.style.borderRadius = '8px';
                memberDiv.style.marginBottom = '10px';
                memberDiv.style.borderLeft = '4px solid var(--primary)';

                memberDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; color: #ffffff; font-size: 1.1rem;">${member}</div>
                            <div style="font-size: 0.9rem; color: #cccccc; margin-top: 5px;">${themeCount} temas atribu√≠dos</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 0.9rem; color: #cccccc;">Conclu√≠dos</div>
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">${completedCount}</div>
                        </div>
                    </div>
                `;

                teamMembers.appendChild(memberDiv);
            });
        }

        // Renderizar gr√°fico de progresso
        function renderProgressChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');

            const themeNames = Object.keys(themesData);
            const progressValues = Object.values(themesData).map(t => t.progress);
            const backgroundColors = progressValues.map(p => {
                if (p === 100) return '#4caf50';
                if (p >= 70) return '#2196f3';
                if (p >= 40) return '#ff9800';
                return '#ff1744';
            });

            if (window.progressChartInstance) {
                window.progressChartInstance.destroy();
            }

            window.progressChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: themeNames,
                    datasets: [{
                        label: 'Progresso (%)',
                        data: progressValues,
                        backgroundColor: backgroundColors,
                        borderColor: 'rgba(255, 255, 255, 0.1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                color: '#cccccc'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#cccccc',
                                font: {
                                    size: 10
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        // ADMINISTRA√á√ÉO - Fun√ß√µes para gerenciar temas
        function initAdminSection() {
            renderAdminThemesList();
            setupAdminEventListeners();
        }

        function renderAdminThemesList() {
            const container = document.getElementById('adminThemesList');
            if (!container) return;

            container.innerHTML = '';

            Object.entries(themesData).forEach(([name, data]) => {
                const completedTasksCount = data.tasksCompleted ? data.tasksCompleted.filter(t => t).length : 0;

                const themeItem = document.createElement('div');
                themeItem.className = 'theme-item-admin';

                themeItem.innerHTML = `
                    <div>
                        <div style="font-weight: 600; color: #ffffff;">${name}</div>
                        <div style="font-size: 0.85rem; color: #cccccc; margin-top: 5px;">
                            ${data.tasks.length} tarefas ${completedTasksCount > 0 ? `(${completedTasksCount} conclu√≠das)` : ''} | ${data.responsible}
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="filter-btn edit-theme" data-theme="${name}" style="padding: 5px 10px;">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="filter-btn delete-theme" data-theme="${name}" style="padding: 5px 10px; background: rgba(255, 23, 68, 0.2);">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;

                container.appendChild(themeItem);
            });
        }

        function setupAdminEventListeners() {
            // Bot√£o para adicionar novo tema
            const addNewThemeBtn = document.getElementById('addNewTheme');
            const themeForm = document.getElementById('themeForm');
            const cancelThemeBtn = document.getElementById('cancelTheme');
            const saveThemeBtn = document.getElementById('saveTheme');
            const themeProgress = document.getElementById('themeProgress');
            const progressValueDisplay = document.getElementById('progressValueDisplay');

            if (addNewThemeBtn && themeForm) {
                addNewThemeBtn.addEventListener('click', () => {
                    themeForm.style.display = 'block';
                    // Limpar formul√°rio
                    document.getElementById('themeName').value = '';
                    document.getElementById('themeResponsible').value = '';
                    document.getElementById('themeProgress').value = '0';
                    document.getElementById('themeStatus').value = 'pending';
                    document.getElementById('themeDeadline').value = '';
                    document.getElementById('themeTasks').value = '';
                    progressValueDisplay.textContent = '0%';

                    // Configurar bot√£o para salvar novo tema
                    saveThemeBtn.onclick = saveNewTheme;
                });
            }

            if (cancelThemeBtn && themeForm) {
                cancelThemeBtn.addEventListener('click', () => {
                    themeForm.style.display = 'none';
                });
            }

            if (themeProgress && progressValueDisplay) {
                themeProgress.addEventListener('input', function() {
                    progressValueDisplay.textContent = this.value + '%';
                });
            }

            // Bot√µes de editar/excluir (event delegation)
            document.addEventListener('click', function(e) {
                // Editar tema
                if (e.target.closest('.edit-theme')) {
                    const themeName = e.target.closest('.edit-theme').getAttribute('data-theme');
                    editTheme(themeName);
                }

                // Excluir tema
                if (e.target.closest('.delete-theme')) {
                    const themeName = e.target.closest('.delete-theme').getAttribute('data-theme');
                    deleteTheme(themeName);
                }
            });

            // Importar dados
            const importDataBtn = document.getElementById('importData');
            if (importDataBtn) {
                importDataBtn.addEventListener('click', importDataFromFile);
            }

            // Exportar dados
            const exportJSONBtn = document.getElementById('exportJSON');
            const exportCSVBtn = document.getElementById('exportCSV');

            if (exportJSONBtn) {
                exportJSONBtn.addEventListener('click', exportAllDataAsJSON);
            }

            if (exportCSVBtn) {
                exportCSVBtn.addEventListener('click', exportAllDataAsCSV);
            }

            // Resetar dados
            const resetDataBtn = document.getElementById('resetData');
            if (resetDataBtn) {
                resetDataBtn.addEventListener('click', resetAllData);
            }

            // Gerar relat√≥rio
            const generateReportBtn = document.getElementById('generateReport');
            if (generateReportBtn) {
                generateReportBtn.addEventListener('click', generateReport);
            }

            // Exportar dados do bot√£o principal
            const exportDataBtn = document.getElementById('exportData');
            if (exportDataBtn) {
                exportDataBtn.addEventListener('click', exportAllDataAsJSON);
            }
        }

        function saveNewTheme() {
            const name = document.getElementById('themeName').value.trim();
            const responsible = document.getElementById('themeResponsible').value.trim();
            const progress = parseInt(document.getElementById('themeProgress').value);
            const status = document.getElementById('themeStatus').value;
            const deadline = document.getElementById('themeDeadline').value;
            const tasksText = document.getElementById('themeTasks').value.trim();

            if (!name || !responsible) {
                alert('Preencha pelo menos o nome e o respons√°vel!');
                return;
            }

            const tasks = tasksText ? tasksText.split('\n').filter(t => t.trim()) : [];

            // Adicionar ao themesData
            themesData[name] = {
                responsible: responsible,
                tasks: tasks,
                progress: progress,
                status: status,
                deadline: deadline || new Date().toISOString().split('T')[0],
                tasksCompleted: new Array(tasks.length).fill(false) // Inicializar array de tarefas completas
            };

            // Salvar no localStorage
            saveToStorage();

            // Atualizar interface
            renderOverview();
            renderThemes();
            renderAdminThemesList();
            if (window.progressChartInstance) {
                renderProgressChart();
            }

            // Fechar formul√°rio
            document.getElementById('themeForm').style.display = 'none';

            alert('Tema salvo com sucesso!');
        }

        function editTheme(themeName) {
            const theme = themesData[themeName];
            if (!theme) return;

            // Preencher formul√°rio
            document.getElementById('themeName').value = themeName;
            document.getElementById('themeResponsible').value = theme.responsible;
            document.getElementById('themeProgress').value = theme.progress;
            document.getElementById('progressValueDisplay').textContent = theme.progress + '%';
            document.getElementById('themeStatus').value = theme.status;
            document.getElementById('themeDeadline').value = theme.deadline;
            document.getElementById('themeTasks').value = theme.tasks.join('\n');

            // Mostrar formul√°rio
            document.getElementById('themeForm').style.display = 'block';

            // Mudar comportamento do bot√£o salvar
            const saveBtn = document.getElementById('saveTheme');
            saveBtn.onclick = function() {
                updateTheme(themeName);
            };
        }

        function updateTheme(oldName) {
            const newName = document.getElementById('themeName').value.trim();
            const responsible = document.getElementById('themeResponsible').value.trim();
            const progress = parseInt(document.getElementById('themeProgress').value);
            const status = document.getElementById('themeStatus').value;
            const deadline = document.getElementById('themeDeadline').value;
            const tasksText = document.getElementById('themeTasks').value.trim();

            const tasks = tasksText ? tasksText.split('\n').filter(t => t.trim()) : [];

            // Se o nome mudou, criar novo e excluir antigo
            if (oldName !== newName) {
                // Preservar tasksCompleted se existir
                const oldTasksCompleted = themesData[oldName]?.tasksCompleted || new Array(tasks.length).fill(false);
                delete themesData[oldName];

                themesData[newName] = {
                    responsible: responsible,
                    tasks: tasks,
                    progress: progress,
                    status: status,
                    deadline: deadline,
                    tasksCompleted: oldTasksCompleted // ‚Üê PRESERVAR TAREFAS COMPLETAS
                };
            } else {
                // Atualizar tema existente
                themesData[oldName] = {
                    ...themesData[oldName],
                    responsible: responsible,
                    tasks: tasks,
                    progress: progress,
                    status: status,
                    deadline: deadline
                    // tasksCompleted j√° existe, n√£o sobrescrever
                };
            }

            saveToStorage();
            renderOverview();
            renderThemes();
            renderAdminThemesList();
            if (window.progressChartInstance) {
                renderProgressChart();
            }

            document.getElementById('themeForm').style.display = 'none';
            alert('Tema atualizado com sucesso!');
        }

        function deleteTheme(themeName) {
            if (!confirm(`Tem certeza que deseja excluir o tema "${themeName}"?`)) {
                return;
            }

            delete themesData[themeName];
            saveToStorage();
            renderOverview();
            renderThemes();
            renderAdminThemesList();
            if (window.progressChartInstance) {
                renderProgressChart();
            }

            alert('Tema exclu√≠do com sucesso!');
        }

        function importDataFromFile() {
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];

            if (!file) {
                alert('Selecione um arquivo para importar!');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);

                    // Validar estrutura b√°sica
                    if (importedData.themesData) {
                        // Mesclar dados (ou substituir)
                        if (confirm('Deseja substituir todos os dados atuais?')) {
                            Object.keys(themesData).forEach(key => delete themesData[key]);
                            Object.assign(themesData, importedData.themesData);
                        } else {
                            Object.assign(themesData, importedData.themesData);
                        }

                        saveToStorage();
                        renderOverview();
                        renderThemes();
                        renderAdminThemesList();
                        if (window.progressChartInstance) {
                            renderProgressChart();
                        }

                        alert('Dados importados com sucesso!');
                    } else {
                        alert('Arquivo inv√°lido. Formato incorreto.');
                    }
                } catch (error) {
                    alert('Erro ao ler arquivo. Verifique se √© um JSON v√°lido.');
                    console.error(error);
                }
            };

            reader.readAsText(file);
        }

        function exportAllDataAsJSON() {
            const exportData = {
                themesData: themesData,
                timelineData: timelineData,
                risksData: risksData,
                exportDate: new Date().toISOString(),
                version: '1.0'
            };

            const dataStr = JSON.stringify(exportData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);

            const exportFileDefaultName = `etrabalhador_backup_${new Date().toISOString().split('T')[0]}.json`;

            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function exportAllDataAsCSV() {
            let csvContent = "Tema,Respons√°vel,Progresso,Status,Prazo,Tarefas Conclu√≠das/Total\n";

            Object.entries(themesData).forEach(([name, data]) => {
                const completedTasks = data.tasksCompleted ? data.tasksCompleted.filter(t => t).length : 0;
                const totalTasks = data.tasks.length;
                csvContent += `"${name}","${data.responsible}",${data.progress},"${data.status}","${data.deadline}","${completedTasks}/${totalTasks}"\n`;
            });

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = `etrabalhador_dados_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function resetAllData() {
            if (!confirm('ATEN√á√ÉO: Isso apagar√° TODOS os dados. Tem certeza?')) {
                return;
            }

            if (!confirm('CONFIRMA√á√ÉO FINAL: Esta a√ß√£o N√ÉO pode ser desfeita.')) {
                return;
            }

            // Limpar todos os dados
            Object.keys(themesData).forEach(key => delete themesData[key]);

            // Restaurar dados de exemplo
            Object.assign(themesData, {
                "Novo Tema": {
                    responsible: "Seu Nome",
                    tasks: ["Primeira tarefa", "Segunda tarefa"],
                    progress: 0,
                    status: "pending",
                    deadline: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    tasksCompleted: [false, false]
                }
            });

            saveToStorage();
            renderOverview();
            renderThemes();
            renderAdminThemesList();
            if (window.progressChartInstance) {
                renderProgressChart();
            }

            alert('Dados resetados para os valores padr√£o!');
        }

        function generateReport() {
            const reportData = {
                projeto: 'e-Trabalhador',
                dataGeracao: new Date().toLocaleString('pt-BR'),
                progressoTotal: document.getElementById('totalProgress').textContent,
                temas: Object.keys(themesData).length,
                temasConcluidos: document.getElementById('completedThemes').textContent,
                resumo: Object.entries(themesData).map(([name, data]) => ({
                    tema: name,
                    responsavel: data.responsible,
                    progresso: data.progress + '%',
                    status: getStatusText(data.status),
                    prazo: data.deadline,
                    tarefas: data.tasks.length,
                    tarefasConcluidas: data.tasksCompleted ? data.tasksCompleted.filter(t => t).length : 0
                }))
            };

            const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = `relatorio_etrabalhador_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            alert('Relat√≥rio gerado e baixado com sucesso!');
        }

        // Configurar eventos
        function setupEventListeners() {
            // Fechar modal
            closeModalBtn.addEventListener('click', () => {
                modal.classList.remove('active');
            });

            // Fechar modal ao clicar fora
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        }

        // Utilit√°rios
        function getStatusText(status) {
            const statusMap = {
                'pending': 'Pendente',
                'in-progress': 'Em Andamento',
                'completed': 'Conclu√≠do',
                'blocked': 'Bloqueado'
            };
            return statusMap[status] || status;
        }

        // Armazenamento
        function saveToStorage() {
            const data = {
                themesData,
                lastUpdated: new Date().toISOString()
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        function loadFromStorage() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    if (data.themesData) {
                        themesData = data.themesData;
                    }
                } catch (e) {
                    console.error('Erro ao carregar dados salvos:', e);
                }
            }
        }
    </script>

    <!-- Incluir Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>